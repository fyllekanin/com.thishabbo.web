<div class="grid-container full">
    <div class="grid-x margin-x">
        <div class="cell small-12 medium-8">
            <div *ngFor="let category of categories">
                <app-title
                    [title]="category.title"
                    [titlePointer]="true"
                    [tabs]="toggleTab"
                    (onTabClick)="toggleCategory(category)"
                    (onTitleClick)="onTitleClick(category)">
                </app-title>
                <app-content [isContracted]="isCategoryContracted(category)">
                    <app-forum-slim-category *ngFor="let child of category.childs.sort(sortCategories)"
                                             [category]="child"></app-forum-slim-category>
                </app-content>
            </div>
            <div *ngIf="categories.length === 0">
                <app-title [title]="'No categories available'"></app-title>
                <app-content>
                    You don't have access to see any categories on the forum. <br/>
                    If you are logged in and seeing this error message, please contact an Administrator. If you aren't
                    logged in, please do so!
                </app-content>
            </div>
        </div>
        <div class="cell small-12 medium-4">
            <app-title [title]="'Latest Posts'" [top]="latestPostersTop"></app-title>
            <app-content>
                <div *ngIf="latestPosts.length === 0">
                    Loading...
                </div>
                <div *ngFor="let latestPost of latestPosts; let i = index;">
                    <div class="latest-post-icon"><i class="fas fa-comment"></i></div>
                    <div class="latest-post-content">
                        <a class="title" [routerLink]="['/forum', 'thread', latestPost.threadId, 'page', latestPost.page]" [queryParams]="{ scrollTo: 'post-' + latestPost.postId}">
                            <span *ngIf="latestPost.text" [style]="latestPost.style | safeStyle">
                                {{latestPost.text}} &#xbb;
                            </span>
                            {{latestPost.title}}
                        </a>
                        <a [routerLink]="['/user/profile/', (latestPost.user ? latestPost.user.nickname : '')]">
                            <span [style]="(latestPost.user ? latestPost.user.styling : '') | safeStyle" class="name">{{(latestPost.user ? latestPost.user.nickname : '')}}</span>
                        </a>
                    </div>
                </div>
                <div class="divider"></div>
                <button appButton [color]="refreshButton" [float]="'right'">Refresh</button>
            </app-content>


            <app-title [title]="'Top Posters Today'"></app-title>
            <app-content>
                <div *ngIf="topPostersToday.length === 0">
                    Loading...
                </div>
                <div class="latest-post" *ngFor="let topPoster of topPostersToday; let i = index;">
                    {{i + 1}}.
                    <a [routerLink]="['/user/profile/', (topPoster.user ? topPoster.user.nickname : '')]">
                        <span [style]="(topPoster.user ? topPoster.user.styling : '') | safeStyle">{{(topPoster.user ? topPoster.user.nickname : '')}}</span>
                    </a>

                    <span class="float-right">({{topPoster.posts | number: '1.'}})</span>
                </div>
            </app-content>

            <app-title [title]="'Top Posters'"></app-title>
            <app-content>
                <div *ngIf="topPosters.length === 0">
                    Loading...
                </div>
                <div class="latest-post" *ngFor="let topPoster of topPosters; let i = index;">
                    {{i + 1}}.
                    <a [routerLink]="['/user/profile/', (topPoster.user ? topPoster.user.nickname : '')]">
                        <span [style]="(topPoster.user ? topPoster.user.styling : '') | safeStyle">{{(topPoster.user ? topPoster.user.nickname : '')}}</span>
                    </a>

                    <span class="float-right">({{topPoster.posts | number: '1.'}})</span>
                </div>
            </app-content>
        </div>
    </div>
</div>
